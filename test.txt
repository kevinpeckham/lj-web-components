class ScrollingStat extends HTMLElement{duration;start_time=null;current_number;target_number;number_span=null;isOnScreen=!1;observer_options;static get observedAttributes(){return["duration","number","unit","text"]}constructor(){super(),this.duration=parseInt(this.getAttribute("duration")??"600"),this.current_number=0,this.target_number=parseInt(this.getAttribute("number")??"99"),this.start_time=null,this.number_span=null,this.isOnScreen=!1,this.observer_options={root:null,rootMargin:"0px",threshold:.5},this.style_rules="* {line-height: 1;margin: 0;padding: 0;font-weight: 400;font-size: 1em;font-style: normal;text-decoration: none;}#wrapper {align-items: baseline;display: grid;gap: .25em;grid-template-columns: min-content 1fr;border-radius: 0.25rem;outline: 1px solid currentColor;padding: 2em 1em;background-color: rgb(255 255 255 / .05);width: 100%;max-width:12em;}#wrapper span:nth-child(1) {font-size: 2.75em;font-weight: 800;}#wrapper span:nth-child(2) {font-size: 1.95em;font-weight: 800;}#wrapper span:nth-child(3) {font-size: 0.9em;font-weight: 400;font-style: italic;grid-column: 1 / span 2;line-height:1.2;opacity: 0.9;}",this.connectedCallback=this.connectedCallback.bind(this),this.tweenNumber=this.tweenNumber.bind(this),this.observerCallback=this.observerCallback.bind(this)}observerCallback(t){const e=t[0].isIntersecting;e&&!this.isOnScreen&&(this.start_time=null,this.current_number=1,this.tweenNumber(this.duration)),this.isOnScreen=e}connectedCallback(){const t=this.attachShadow({mode:"open"}),e=document.createElement("span");this.number_span=document.createElement("span");const n=document.createElement("span"),i=document.createElement("span"),r=document.createElement("style");e.setAttribute("id","wrapper"),i.textContent=this.getAttribute("text")??"",n.textContent=this.getAttribute("unit")??"1",r.textContent=this.style_rules,t.appendChild(r),t.appendChild(e),e.appendChild(this.number_span),e.appendChild(n),e.appendChild(i);const s=new IntersectionObserver(this.observerCallback,this.observer_options);e&&s.observe(e)}tweenNumber(t){this.start_time||(this.start_time=Date.now());const e=Date.now()-this.start_time,n=Math.min(e/t,1);this.current_number=this.target_number*n,this.number_span&&(this.number_span.textContent=this.current_number.toFixed(0)),n<1?window.requestAnimationFrame((()=>this.tweenNumber(t))):this.number_span&&(this.number_span.textContent=this.target_number.toFixed(0))}}customElements.define("scrolling-stat",ScrollingStat);